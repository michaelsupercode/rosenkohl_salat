!function(){"use strict";var e=e=>new Promise(((t,r)=>{const n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e.url),e.integrity&&n.setAttribute("integrity",e.integrity),e.async&&n.setAttribute("async",e.async.toString()),e.defer&&n.setAttribute("defer",e.defer.toString()),e.crossOrigin&&n.setAttribute("crossorigin",e.crossOrigin),n.onload=t,n.onerror=r,document.head.appendChild(n)}));var t=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();var r=e=>{try{return JSON.parse(e),!0}catch(e){return!1}};var n=e=>window.webkit&&window.webkit.messageHandlers&&e.ios in window.webkit.messageHandlers&&"function"==typeof window.webkit.messageHandlers[e.ios].postMessage?"ios":e.android in window?"android":"";var a=e=>"object"===t(e)?{...e}:"array"===t(e)?[...e]:e;const i=(e,r)=>{if("object"!==t(e))return e;const n={},a=Object.keys(e),s=Object.keys(r);for(let o=0,c=a.length;o<c;o+=1){const c=a[o],u=e[c],l=s.indexOf(c)>-1?r[c]:c;if("object"===t(u))n[l]=i({...u},r);else if("array"===t(u)){n[l]=[...u];for(let e=0,t=u.length;e<t;e+=1)n[l][e]=i(u[e],r)}else n[l]=u}return n};var s=i,o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var u=function(e,t){return e===t||e!=e&&t!=t},l="object"==typeof o&&o&&o.Object===Object&&o,d=l,h="object"==typeof self&&self&&self.Object===Object&&self,f=d||h||Function("return this")(),m=f.Symbol,E=m,p=Object.prototype,v=p.hasOwnProperty,_=p.toString,g=E?E.toStringTag:void 0;var O=function(e){var t=v.call(e,g),r=e[g];try{e[g]=void 0;var n=!0}catch(e){}var a=_.call(e);return n&&(t?e[g]=r:delete e[g]),a},y=Object.prototype.toString;var S=O,b=function(e){return y.call(e)},T=m?m.toStringTag:void 0;var I=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":T&&T in Object(e)?S(e):b(e)};var A=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)},N=I,R=A;var D=function(e){if(!R(e))return!1;var t=N(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};var w=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},C=D,L=w;var M=function(e){return null!=e&&L(e.length)&&!C(e)},j=/^(?:0|[1-9]\d*)$/;var P=function(e,t){var r=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&j.test(e))&&e>-1&&e%1==0&&e<t};var U=function(e){return null!=e&&"object"==typeof e};let V="~";function F(){}Object.create&&(F.prototype=Object.create(null),(new F).__proto__||(V=!1));class G{constructor(e,t,r=!1){this.handler=e,this.context=t,this.once=r}}function x(e,t,r,n,a){if("function"!=typeof r)throw new TypeError("The handler must be a function.");if("symbol"==typeof t&&e._prefix)throw new TypeError("The event name cannot be a symbol when events should be prefixed. Use string literals instead.");const i=new G(r,n||e,a),s=e._prefix?`${e._prefix}${t}`:t;return e._listeners[s]||(e._listeners[s]=[],e._listenerCount+=1),e._listeners[s].push(i),e}function q(e,t){const r=e._prefix?`${e._prefix}${t}`:t;0==--e._listenerCount?e._listeners=new F:delete e._listeners[r]}function k(e,t,...r){e.parent&&e.parent instanceof $&&e.parent.emit(t,...r)}class ${get eventNames(){let e=[];return 0===this._listenerCount||(e=e.concat(Object.keys(this._listeners).map((e=>this._prefix?e.slice(1):e))),Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(this._listeners)))),e}get parent(){return this._parent}set parent(e){this._parent=e}constructor(){this._prefix=V,this._listeners=new F,this._listenerCount=0,this._parent=void 0}has(e){if("symbol"==typeof e)return Object.getOwnPropertySymbols(this._listeners).includes(e);const t=this._prefix?`${this._prefix}${e}`:e;return Object.keys(this._listeners).includes(t)}on(e,t,r){return x(this,e,t,r)}once(e,t,r){return x(this,e,t,r,!0)}off(e,t,r,n=!1){const a=this._prefix?`${this._prefix}${e}`:e;if(!this.has(e))return this;const i=this._listeners[a];if(!t||i.length<=1)return q(this,a),this;const s=i.findIndex((e=>e.handler===t&&e.context===(r||this)&&e.once===n));return s>-1&&i.splice(s,1),this}clear(e){const t=this._prefix?`${this._prefix}${e}`:e;return this.has(e)?q(this,t):(this._listeners=new F,this._listenerCount=0),this}emit(e,...t){const r=this._prefix?`${this._prefix}${e}`:e;if(this.has(e)||this.has($.EVENT_CONFIG.ALL_EVENTS_KEY)){let n=this._listeners[r];if(this.has($.EVENT_CONFIG.ALL_EVENTS_KEY)){n=[...n=n||[],...this._listeners[$.EVENT_CONFIG.ALL_EVENTS_KEY]]}for(let e=n.length;e>=0;e-=1){const a=n[e];if(a){const{handler:e,once:n,context:i}=a;n&&this.off(r,e,i,n),e.call(i,...t)}}return k(this,e,...t),!0}return k(this,e,...t),!1}all(e,t){return x(this,$.EVENT_CONFIG.ALL_EVENTS_KEY,e,t)}none(e,t){return this.off($.EVENT_CONFIG.ALL_EVENTS_KEY,e,t)}}$.EVENT_CONFIG={ALL_EVENTS_KEY:"~ALL_EVENTS~"};var B=function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a},z=B;var Y,H=function(e,t){return z(t,(function(t){return[t,e[t]]}))},Q=f["__core-js_shared__"],J=(Y=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+Y:"";var X=function(e){return!!J&&J in e},Z=Function.prototype.toString;var W=function(e){if(null!=e){try{return Z.call(e)}catch(e){}try{return e+""}catch(e){}}return""},K=D,ee=X,te=A,re=W,ne=/^\[object .+?Constructor\]$/,ae=Function.prototype,ie=Object.prototype,se=ae.toString,oe=ie.hasOwnProperty,ce=RegExp("^"+se.call(oe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ue=function(e,t){return null==e?void 0:e[t]},le=function(e){return!(!te(e)||ee(e))&&(K(e)?ce:ne).test(re(e))},de=ue;var he=function(e,t){var r=de(e,t);return le(r)?r:void 0},fe=he(f,"DataView"),me=he(f,"Map"),Ee=fe,pe=me,ve=he(f,"Promise"),_e=he(f,"Set"),ge=he(f,"WeakMap"),Oe=I,ye=W,Se="[object Map]",be="[object Promise]",Te="[object Set]",Ie="[object WeakMap]",Ae="[object DataView]",Ne=ye(Ee),Re=ye(pe),De=ye(ve),we=ye(_e),Ce=ye(ge),Le=Oe;(Ee&&Le(new Ee(new ArrayBuffer(1)))!=Ae||pe&&Le(new pe)!=Se||ve&&Le(ve.resolve())!=be||_e&&Le(new _e)!=Te||ge&&Le(new ge)!=Ie)&&(Le=function(e){var t=Oe(e),r="[object Object]"==t?e.constructor:void 0,n=r?ye(r):"";if(n)switch(n){case Ne:return Ae;case Re:return Se;case De:return be;case we:return Te;case Ce:return Ie}return t});var Me=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r};var je=H,Pe=Le,Ue=Me,Ve=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r};var Fe=function(e){return function(t){var r=Pe(t);return"[object Map]"==r?Ue(t):"[object Set]"==r?Ve(t):je(t,e(t))}};var Ge=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},xe=I,qe=U;var ke=function(e){return qe(e)&&"[object Arguments]"==xe(e)},$e=U,Be=Object.prototype,ze=Be.hasOwnProperty,Ye=Be.propertyIsEnumerable,He=ke(function(){return arguments}())?ke:function(e){return $e(e)&&ze.call(e,"callee")&&!Ye.call(e,"callee")},Qe=He,Je=Array.isArray,Xe={exports:{}};var Ze=function(){return!1};!function(e,t){var r=f,n=Ze,a=t&&!t.nodeType&&t,i=a&&e&&!e.nodeType&&e,s=i&&i.exports===a?r.Buffer:void 0,o=(s?s.isBuffer:void 0)||n;e.exports=o}(Xe,Xe.exports);var We=Xe.exports,Ke=I,et=w,tt=U,rt={};rt["[object Float32Array]"]=rt["[object Float64Array]"]=rt["[object Int8Array]"]=rt["[object Int16Array]"]=rt["[object Int32Array]"]=rt["[object Uint8Array]"]=rt["[object Uint8ClampedArray]"]=rt["[object Uint16Array]"]=rt["[object Uint32Array]"]=!0,rt["[object Arguments]"]=rt["[object Array]"]=rt["[object ArrayBuffer]"]=rt["[object Boolean]"]=rt["[object DataView]"]=rt["[object Date]"]=rt["[object Error]"]=rt["[object Function]"]=rt["[object Map]"]=rt["[object Number]"]=rt["[object Object]"]=rt["[object RegExp]"]=rt["[object Set]"]=rt["[object String]"]=rt["[object WeakMap]"]=!1;var nt=function(e){return tt(e)&&et(e.length)&&!!rt[Ke(e)]};var at=function(e){return function(t){return e(t)}},it={exports:{}};!function(e,t){var r=l,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,i=a&&a.exports===n&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||i&&i.binding&&i.binding("util")}catch(e){}}();e.exports=s}(it,it.exports);var st=it.exports,ot=nt,ct=at,ut=st&&st.isTypedArray,lt=ut?ct(ut):ot,dt=Ge,ht=Qe,ft=Je,mt=We,Et=P,pt=lt,vt=Object.prototype.hasOwnProperty;var _t=function(e,t){var r=ft(e),n=!r&&ht(e),a=!r&&!n&&mt(e),i=!r&&!n&&!a&&pt(e),s=r||n||a||i,o=s?dt(e.length,String):[],c=o.length;for(var u in e)!t&&!vt.call(e,u)||s&&("length"==u||a&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Et(u,c))||o.push(u);return o},gt=Object.prototype;var Ot=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||gt)};var yt=function(e,t){return function(r){return e(t(r))}},St=yt(Object.keys,Object),bt=Ot,Tt=St,It=Object.prototype.hasOwnProperty;var At=function(e){if(!bt(e))return Tt(e);var t=[];for(var r in Object(e))It.call(e,r)&&"constructor"!=r&&t.push(r);return t},Nt=_t,Rt=At,Dt=M;var wt=function(e){return Dt(e)?Nt(e):Rt(e)},Ct=Fe(wt),Lt=c(Ct),Mt=B;var jt=function(e,t){return Mt(t,(function(t){return e[t]}))},Pt=jt,Ut=wt;var Vt=c((function(e){return null==e?[]:Pt(e,Ut(e))}));const Ft=(e,t,r,n={})=>{const a=["namespace","module","method","message"][t],i=r[e[a]-1];return i&&(n[a]=i.text,i.children&&i.children.length)?Ft(e,t+1,i.children,n):n};class Gt{get level(){return Object.keys(Gt.TYPES)[this.type-1].toLowerCase()}get plainData(){return{createdAt:new Date(this.createdAt).toJSON(),level:this.level,namespace:this.namespace,module:this.module,method:this.method,message:this.message,internalMessage:this.internalMessage}}constructor(e,t,r,n,a,i=void 0){this.type=e,this.namespace=t,this.module=r,this.method=n,this.message=a,this.internalMessage=i,this.createdAt=Date.now()}includes(e){return!!this.internalMessage&&this.internalMessage.includes(e)}toJSON(e=!1){const{plainData:t}=this;return JSON.stringify(e?s(t,Gt.SHORTNAME_MAPPING):t)}prettify(e,t,r={abbreviate:!1,prefix:void 0,delimiter:" | "}){if(!0===Vt(Gt.FORMATS).includes(e)){const{plainData:n}=this,a={...n,...Ft(n,0,t)};if(e===Gt.FORMATS.JSON)return JSON.stringify(r.abbreviate?s(a,Gt.SHORTNAME_MAPPING):a);let i=[];return i=i.concat(Lt(a).map((([e,t])=>`${e.toUpperCase()}:${t}`))),r.prefix&&i.push(r.prefix),i.reverse().join(r.delimiter)}return""}}Gt.TYPES=Object.defineProperties({},{INFO:{value:1,enumerable:!0},WARNING:{value:2,enumerable:!0},ERROR:{value:3,enumerable:!0},FATAL:{value:4,enumerable:!0}}),Gt.FORMATS=Object.defineProperties({},{JSON:{value:1,enumerable:!0},LOG:{value:2,enumerable:!0}}),Gt.fromJSON=e=>{const t=JSON.parse(e);if(t.level&&void 0===t.type){const[,e]=Lt(Gt.TYPES).find((([e])=>e.toLowerCase()===t.level));t.type=e}const{type:r,namespace:n,module:a,method:i,message:s,internalMessage:o}=t;return new Gt(r,n,a,i,s,o)},Gt.SHORTNAME_MAPPING={level:"lv",type:"tp",namespace:"ns",module:"md",method:"mt",message:"ms",internalMessage:"im",createdAt:"ca"};var xt=Gt;class qt{get size(){return this.items.length}constructor(e){this.items=[];for(let t=0,r=e.length;t<r;t+=1)this.enqueue(e[t])}enqueue(e){this.items.push(e)}dequeue(){return this.items.shift()}flush(){this.items=[]}}const kt=(e,t)=>{try{const{options:n}=e;e.pending=!0;const a=Array.from(t),i=a.slice(1,a.length),s=a[0];let o,c=((e,t)=>{const{options:r,facades:n}=e;if(r.multiTenancy){const e="number"==typeof t[0]?t[0]:r.defaultTenant;return n.get(e)}return n.get(0)})(e,i);c||(c=((e,t)=>{const{facadeFactory:r,options:n}=e,a=r(e);if(n.multiTenancy){const r="number"==typeof t[0]?t[0]:n.defaultTenant;e.facades.set(r,a)}else e.facades.set(0,a);return a})(e,i)),o=!0===n.multiTenancy&&"number"==typeof i[0]?i.slice(1,i.length):i;const u=c[s](...o);!0===(r=u,Boolean(r&&"function"==typeof r.then))?u.then((t=>e.emit("executed",t))).catch((t=>e.emit("error",t))):e.emit("executed",s,u)}catch(t){e.emit("error",t)}var r};class $t extends ${constructor(e=void 0,t={},r=[]){super(),this.pending=!1,this.failed=!1,this.queue=new qt(r),this.facades=new Map,this.facadeFactory=e,this.options={mode:1,multiTenancy:!1,continueOnError:!0,logging:!1,defaultTenant:1,onError:void 0,onExecuted:void 0,...t},this.on("executed",(e=>((e,t)=>{const{options:r}=e;r.onExecuted&&"function"==typeof r.onExecuted&&r.onExecuted(t),e.pending=!1,e.failed=!1,r.mode===$t.MODE.AUTO&&e.dequeue()})(this,e))),this.on("error",(e=>((e,t)=>{const{options:r}=e;r.logging&&console.error(t),r.onError&&"function"==typeof r.onError&&r.onError(t),e.pending=!1,e.failed=!0,!0===r.continueOnError&&r.mode===$t.MODE.AUTO&&e.dequeue()})(this,e))),this.queue.size>0&&this.options.mode===$t.MODE.AUTO&&this.dequeue()}flush(){this.queue.flush()}addFacadeFactory(e){this.facadeFactory=e,this.queue.size>0&&this.options.mode===$t.MODE.AUTO&&this.dequeue()}removeFacadeFactory(){this.facadeFactory=void 0,this.facades.clear()}dequeue(){if(!0===this.pending)setTimeout((()=>this.dequeue()),10);else{if(this.queue.size>0&&(!1===this.failed||!0===this.options.continueOnError)&&this.facadeFactory&&"function"==typeof this.facadeFactory){const e=this.queue.dequeue();kt(this,e)}}}enqueue(...e){1===e.length&&"string"!=typeof e[0]?this.queue.enqueue(e[0]):this.queue.enqueue(e),this.options.mode===$t.MODE.AUTO&&this.dequeue()}push(...e){this.enqueue(...e)}}$t.MODE=Object.defineProperties({},{AUTO:{value:1,enumerable:!0},MANUAL:{value:2,enumerable:!0}});var Bt=c(Ct);var zt=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function Yt(e,t,r,n,a){return new xt(e,t,r,n,a)}const Ht=(e,t)=>{const r=Bt(e),n=[];for(let e=0,a=t.length;e<a;e+=1){const a=t[e],i=r.find((([e])=>e===a.name||e===a.abbreviation));let s;i&&(s=i[1]),n.push({...a,value:s})}return n};class Qt extends ${constructor(e){super(),this.moduleId=2,this.commands=e,this.parameters=void 0}parse(e,...t){const n=this.commands.find((t=>t.name===e||t.abbreviation===e));return n?(this.command=n,this.parameters=((e,t)=>{let n=[];const{parameters:a}=e;for(let o=0,c=a.length;o<c;o+=1){let c=a[o],u=t[o];if(r(u)&&e.options&&!0===e.options.allowJSON&&(u=JSON.parse(u)),"function"===zt(c)){const e=a[o](t);c=e&&1===e.length?e[0]:e}c&&(n="object"===zt(u)?n.concat(Ht(u,c)):n.concat((i=u,s=c,[{...s,value:i}])))}var i,s;return n})(n,t),this.emit(Qt.EVENTS.PARSING_SUCCEEDED,{command:n,parameters:this.parameters})):this.emit(Qt.EVENTS.PARSING_FAILED,Yt(xt.TYPES.ERROR,1,this.moduleId,1,1)),this}reset(){return this.command=void 0,this.parameters=void 0,this.emit(Qt.EVENTS.PARSING_RESET,Yt(xt.TYPES.INFO,1,this.moduleId,2,1)),this}}Qt.EVENTS={PARSING_FAILED:"PARSING_FAILED",PARSING_SUCCEEDED:"PARSING_SUCCEEDED",PARSING_RESET:"PARSING_RESET"};var Jt=Qt;const Xt={VALIDATION_ASSERTED:"VALIDATION_ASSERTED",VALIDATION_ABORTED:"VALIDATION_ABORTED",VALIDATION_FAILED:"VALIDATION_FAILED",VALIDATION_SUCCEEDED:"VALIDATION_SUCCEEDED",VALIDATION_RESET:"VALIDATION_RESET",VALIDATION_VALUE_MODIFIED:"VALIDATION_VALUE_MODIFIED"},Zt=e=>["requiredIf"].includes(e),Wt=(e,t)=>{const{rules:r,value:n}=e,a=[];for(let i=0,s=r.length;i<s;i+=1){const{name:s,assert:o}=r[i];if(Zt(s)){const r=t.find((t=>t.name===e.sibling));a.push({name:s,assertion:o(n,r.value)})}else a.push({name:s,assertion:o(n)})}return a},Kt=(e,t,r)=>{let n=!1;e.parameters[t].assertions=[];for(let a=0,i=r.length;a<i;a+=1){const{assertion:i,name:s}=r[a];if(e.parameters[t].assertions.push(i),n=i instanceof xt&&i.type===xt.TYPES.FATAL,!0===n)return{abort:n,assertion:i};if("array"===zt(i)){const[r,n,a]=i;e.parameters[t].value=r,e.emit(Xt.VALIDATION_VALUE_MODIFIED,{rule:s,modified:r,origin:n},a)}e.emit(Xt.VALIDATION_ASSERTED,s,Yt(xt.TYPES.INFO,1,e.moduleId,2,3))}return{abort:n}};class er extends Jt{constructor(e){super(e),this.moduleId=3,this.valid=!1,this.lastAssertion=void 0}validate(){return this.command&&this.parameters&&this.parameters.length>0?(this.valid=(e=>{for(let t=0,r=e.parameters.length;t<r;t+=1){const r=Wt(e.parameters[t],e.parameters),{abort:n,assertion:a}=Kt(e,t,r);if(e.lastAssertion=a,n)return e.emit(Xt.VALIDATION_ABORTED,a),!1}return!0})(this),!0===this.valid?this.emit(er.EVENTS.VALIDATION_SUCCEEDED,{command:this.command,parameters:this.parameters}):this.emit(er.EVENTS.VALIDATION_FAILED,Yt(xt.TYPES.FATAL,1,this.moduleId,2,2))):this.emit(er.EVENTS.VALIDATION_FAILED,Yt(xt.TYPES.ERROR,1,this.moduleId,2,1)),this}reset(){return this.valid=!1,super.reset(),this}}er.EVENTS={...Jt.EVENTS,...Xt};var tr=er;class rr extends tr{constructor(e){super(e),this.moduleId=5,this.data=void 0}serialize(e=!1){return this.command&&this.parameters&&this.parameters.length>0&&(this.data=((e,t)=>{const r={};for(let n=0,a=e.length;n<a;n+=1)r[t?e[n].abbreviation:e[n].name]=e[n].value;return r})(this.parameters,e),this.emit(rr.EVENTS.SERIALIZATION_SUCCEEDED,{command:this.command.name,parameters:this.data})),this}result(){return{command:this.command.name,parameters:this.data}}reset(){return this.data=void 0,super.reset()}}rr.EVENTS={...tr.EVENTS,SERIALIZATION_SUCCEEDED:"SERIALIZATION_SUCCEEDED"};var nr=rr,ar=he(Object,"create"),ir=ar;var sr=function(){this.__data__=ir?ir(null):{},this.size=0};var or=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},cr=ar,ur=Object.prototype.hasOwnProperty;var lr=function(e){var t=this.__data__;if(cr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ur.call(t,e)?t[e]:void 0},dr=ar,hr=Object.prototype.hasOwnProperty;var fr=function(e){var t=this.__data__;return dr?void 0!==t[e]:hr.call(t,e)},mr=ar;var Er=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=mr&&void 0===t?"__lodash_hash_undefined__":t,this},pr=sr,vr=or,_r=lr,gr=fr,Or=Er;function yr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}yr.prototype.clear=pr,yr.prototype.delete=vr,yr.prototype.get=_r,yr.prototype.has=gr,yr.prototype.set=Or;var Sr=yr;var br=function(){this.__data__=[],this.size=0},Tr=u;var Ir=function(e,t){for(var r=e.length;r--;)if(Tr(e[r][0],t))return r;return-1},Ar=Ir,Nr=Array.prototype.splice;var Rr=function(e){var t=this.__data__,r=Ar(t,e);return!(r<0)&&(r==t.length-1?t.pop():Nr.call(t,r,1),--this.size,!0)},Dr=Ir;var wr=function(e){var t=this.__data__,r=Dr(t,e);return r<0?void 0:t[r][1]},Cr=Ir;var Lr=function(e){return Cr(this.__data__,e)>-1},Mr=Ir;var jr=function(e,t){var r=this.__data__,n=Mr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Pr=br,Ur=Rr,Vr=wr,Fr=Lr,Gr=jr;function xr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}xr.prototype.clear=Pr,xr.prototype.delete=Ur,xr.prototype.get=Vr,xr.prototype.has=Fr,xr.prototype.set=Gr;var qr=Sr,kr=xr,$r=me;var Br=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e},zr=Br;var Yr=function(e,t){var r=e.__data__;return zr(t)?r["string"==typeof t?"string":"hash"]:r.map},Hr=Yr;var Qr=function(e){var t=Hr(this,e).delete(e);return this.size-=t?1:0,t},Jr=Yr;var Xr=function(e){return Jr(this,e).get(e)},Zr=Yr;var Wr=function(e){return Zr(this,e).has(e)},Kr=Yr;var en=function(e,t){var r=Kr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},tn=function(){this.size=0,this.__data__={hash:new qr,map:new($r||kr),string:new qr}},rn=Qr,nn=Xr,an=Wr,sn=en;function on(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}on.prototype.clear=tn,on.prototype.delete=rn,on.prototype.get=nn,on.prototype.has=an,on.prototype.set=sn;var cn=on,un=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},ln=function(e){return this.__data__.has(e)};function dn(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new cn;++t<r;)this.add(e[t])}dn.prototype.add=dn.prototype.push=un,dn.prototype.has=ln;var hn=function(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1};var fn=function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1},mn=hn,En=function(e){return e!=e},pn=fn;var vn=function(e,t,r){return t==t?pn(e,t,r):mn(e,En,r)};var _n=function(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1};var gn=function(e,t){return e.has(t)},On=dn,yn=function(e,t){return!!(null==e?0:e.length)&&vn(e,t,0)>-1},Sn=_n,bn=B,Tn=at,In=gn,An=Math.min;var Nn=function(e,t,r){for(var n=r?Sn:yn,a=e[0].length,i=e.length,s=i,o=Array(i),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=bn(l,Tn(t))),c=An(l.length,c),o[s]=!r&&(t||a>=120&&l.length>=120)?new On(s&&l):void 0}l=e[0];var d=-1,h=o[0];e:for(;++d<a&&u.length<c;){var f=l[d],m=t?t(f):f;if(f=r||0!==f?f:0,!(h?In(h,m):n(u,m,r))){for(s=i;--s;){var E=o[s];if(!(E?In(E,m):n(e[s],m,r)))continue e}h&&h.push(m),u.push(f)}}return u};var Rn=function(e){return e};var Dn=function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)},wn=Dn,Cn=Math.max;var Ln=function(e,t,r){return t=Cn(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Cn(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(s),wn(e,this,o)}};var Mn=function(e){return function(){return e}},jn=he,Pn=function(){try{var e=jn(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Un=Mn,Vn=Pn,Fn=Vn?function(e,t){return Vn(e,"toString",{configurable:!0,enumerable:!1,value:Un(t),writable:!0})}:Rn,Gn=Fn,xn=Date.now;var qn=function(e){var t=0,r=0;return function(){var n=xn(),a=16-(n-r);if(r=n,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},kn=qn(Gn),$n=Rn,Bn=Ln,zn=kn;var Yn=function(e,t){return zn(Bn(e,t,$n),e+"")},Hn=M,Qn=U;var Jn=function(e){return Qn(e)&&Hn(e)};var Xn=B,Zn=Nn,Wn=function(e){return Jn(e)?e:[]},Kn=c(Yn((function(e){var t=Xn(e,Wn);return t.length&&t[0]===e[0]?Zn(t):[]})));var ea=e=>"array"===zt(e)?!!e.length:null!=e&&!Number.isNaN(e)&&(!1===e||(e instanceof Date?!Number.isNaN(e.getTime()):"object"===zt(e)?!!Object.keys(e).length:!!String(e).length));var ta=e=>t=>!ea(t)||null!==t.toString().match(e);var ra=(e,t)=>r=>!ea(r)||(!/\s/.test(r)||r instanceof Date)&&e<=+r&&t>=+r;var na=e=>"array"===zt(e)?e.length:"object"===zt(e)?Object.keys(e).length:String(e).length;var aa=e=>t=>!ea(t)||na(t)<=e;var ia=e=>t=>!ea(t)||na(t)>=e;var sa=ta(/^\d*(\.\d+)?$/);var oa=e=>t=>!ea(t)||e.indexOf(t)>-1;var ca=e=>t=>!ea(t)||zt(t)===e;function ua(e,t){return(...r)=>e(...r)||t()}class la extends ${constructor(e,t,r={maxExecutionBeforeStop:3,fillParameters:!1}){super(),this.moduleId=4,this.history=new Map,this.stats={},this.data={},this.commandQueue=e,this.commandSerializer=new nr(t),this.options=r}process(e,...t){try{let r;const n=this.commandSerializer.commands.find((t=>t.name===e||t.abbreviation===e));if(n){const{abbreviation:a,name:i}=n;if(void 0===this.stats[a]&&(this.stats[a]=0),this.options.fillParameters&&!1===ea(t)&&this.data[a])return r={command:i,parameters:this.data[a]},this.emit(la.EVENTS.PROCESSING_SUCCEEDED,r),r;const{valid:s,stop:o}=((e,t,r,n)=>{let a=!0,i=!1;if(e.dependencies&&e.dependencies.length>0){const s=Array.from(t.keys());a=Kn(s,e.dependencies).length===e.dependencies.length,i=r[e.abbreviation]>n}return{stop:i,valid:a}})(n,this.history,this.stats,this.options.maxExecutionBeforeStop);if(!0===s&&!1===o)if(this.commandSerializer.reset().parse(e,...t).validate(),this.commandSerializer.valid){r=this.commandSerializer.serialize().result();const e="function"==typeof n.id?n.id(r.parameters):n.id;this.history.set(e,{parameters:t,createdAt:Date.now()}),this.stats[a]=0,this.data[a]=r.parameters,this.emit(la.EVENTS.PROCESSING_SUCCEEDED,r)}else this.stats[a]+=1,this.emit(la.EVENTS.PROCESSING_FAILED,this.commandSerializer.lastAssertion);else!1===s&&!1===o?(this.stats[a]+=this.stats[a]+1,this.commandQueue.enqueue(e,...t),this.emit(la.EVENTS.PROCESSING_REQUEUED,new xt(xt.TYPES.WARNING,1,this.moduleId,1,1))):this.emit(la.EVENTS.PROCESSING_FAILED,new xt(xt.TYPES.FATAL,1,this.moduleId,1,2))}return r}catch(e){const t=new xt(xt.TYPES.FATAL,1,this.moduleId,1,3,e.message);return void this.emit(la.EVENTS.PROCESSING_FAILED,t)}}getCommandParameters(e){const t=this.commandSerializer.commands.find((t=>t.name===e||t.abbreviation===e));if(t)return this.data[t.abbreviation]}reset(){this.commandSerializer.reset(),this.stats={},this.history=new Map,this.data={}}}la.EVENTS={PROCESSING_SUCCEEDED:"PROCESSING_SUCCEEDED",PROCESSING_FAILED:"PROCESSING_FAILED",PROCESSING_REQUEUED:"PROCESSING_REQUEUED"};var da=la;var ha=e=>({name:"appSite",abbreviation:"as",sibling:"hybrid",rules:e});var fa=e=>({name:"code",abbreviation:"cp",rules:e});var ma=e=>({name:"comment",abbreviation:"co",rules:e});var Ea=e=>({name:"consentString",abbreviation:"ct",rules:e});var pa=e=>({name:"country",abbreviation:"cn",rules:e});var va=e=>({name:"debug",abbreviation:"dg",rules:e});var _a=e=>({name:"distributionChannel",abbreviation:"dc",rules:e});var ga=e=>({name:"domainServiceName",abbreviation:"dn",rules:e});var Oa=e=>({name:"event",abbreviation:"ev",rules:e});var ya=e=>({name:"hybrid",abbreviation:"hy",rules:e});var Sa=e=>({name:"hybridToken",abbreviation:"ht",rules:e});var ba=e=>({name:"mediaTypes",abbreviation:"mt",rules:e});var Ta=e=>({name:"methods",abbreviation:"mh",rules:e});var Ia=e=>({name:"mode",abbreviation:"mo",rules:e});var Aa=e=>({name:"multiIdentifier",abbreviation:"mi",rules:e});var Na=e=>({name:"panelIdentifier",abbreviation:"pid",rules:e,sibling:"panelVendorId"});var Ra=e=>({name:"panelVendorId",abbreviation:"pvd",rules:e,sibling:"panelIdentifier"});var Da=e=>({name:"pixelType",abbreviation:"pt",rules:e});var wa=e=>({name:"site",abbreviation:"st",rules:e});var Ca=e=>({name:"tenant",abbreviation:"ta",rules:e});var La=e=>({name:"thirdPartyModule",abbreviation:"3p",rules:e});var Ma=(e,t,r)=>n=>e(n)||[t,n,Yt(2,...r)];var ja=(e,t)=>({name:e,assert:t});var Pa=ta(/^[a-zA-Z0-9_]*$/);var Ua=[ja("required",Ma(ea,void 0,[1,1,5,1])),ja("typeOf",ua(ca("string"),(()=>Yt(4,1,1,5,2)))),ja("siteIdentifier",ua(Pa,(()=>Yt(4,1,1,5,3)))),ja("min",ua(ia(3),(()=>Yt(4,1,1,5,4)))),ja("max",ua(aa(15),(()=>Yt(4,1,1,5,5))))];function Va(e,t){return r=>ea(r)||[e,r,Yt(2,...t)]}var Fa=(e,t,r)=>n=>"string"!==zt(n)||!ea(n)||[n.replace(e,t),n,Yt(2,...r)];var Ga=(e,t)=>r=>{if(ea(r)&&!1===aa(e)(r)){let n;return n="number"===zt(r)?((e,t)=>{let r=e.toString();return r=r.slice(0,t),parseInt(r,10)})(r,e):"array"===zt(r)||"string"===zt(r)?r.slice(0,e):"object"===zt(r)?((e,t)=>{const r=Object.keys(e),n={};for(let a=0,i=t;a<i;a+=1)n[r[a]]=e[r[a]];return n})(r,e):r,[n,r,Yt(2,...t)]}return!0};const xa="Leercode_nichtzuordnungsfaehig",qa=["qds","dcf","nid"];var ka=[ja("required",Ma(ea,xa,[1,1,6,1])),ja("typeOf",Ma(ca("string"),xa,[1,1,6,2])),ja("sanitize",Fa(/[^a-zA-Z0-9,_/\-?#]/g,".",[1,1,6,3])),ja("truncate",Ga(256,[1,1,6,4]))];var $a=[ja("defaultValue",Va(void 0,[1,1,7,1])),ja("typeOf",Ma(ca("string"),void 0,[1,1,7,2])),ja("ascii",Fa(/[^\x20-\x7E]/g,".",[1,1,7,3])),ja("truncate",Ga(256,[1,1,7,4]))];var Ba=e=>ta(new RegExp(`^([0-9a-fA-F]{2})([0-9a-fA-F]{${4*e}})$`,"g"));var za=(e=!0)=>{const t=[ja("required",ua(ea,(()=>Yt(4,1,1,8,1)))),ja("typeOf",ua(ca("string"),(()=>Yt(4,1,1,8,2)))),ja("consentString",ua(Ba(2),(()=>Yt(4,1,1,8,3))))];return!1===e&&t.splice(0,1),t};var Ya=oa(["de","at"]);var Ha=[ja("defaultValue",Va("de",[1,1,9,1])),ja("typeOf",Ma(ca("string"),"de",[1,1,9,2])),ja("enum",Ma(Ya,"de",[1,1,9,3]))];var Qa=[ja("defaultValue",Va(!1,[1,1,10,1])),ja("typeOf",ua(ca("boolean"),(()=>Yt(4,1,1,10,2))))];var Ja=oa(["web","hyb","ctv"]);var Xa=[ja("defaultValue",Va("web",[1,1,1,11,1])),ja("typeOf",Ma(ca("string"),"web",[1,1,11,2])),ja("enum",Ma(Ja,"web",[1,1,11,3]))];var Za=[ja("required",ua(ea,(()=>Yt(4,1,1,12,1)))),ja("typeof",ua(ca("string"),(()=>Yt(4,1,1,12,2)))),ja("regex",ua(ta(/^(data-)([a-f0-9]{10})\.([a-zA-Z0-9][a-zA-Z0-9-_]{0,63})(?:\.([a-z]{2,63}))?\.([a-z]{2,63})$/g),(()=>Yt(4,1,1,12,3))))];var Wa=oa(["inst","init","open","clse","play","resm","stop","fowa","bakw","recd","paus","forg","bakg","dele","refr","kill","view","alve","fini","mute","aforg","abakg","aclse","sple","scvl","serr","spyr","smdr","sfpl","sfqt","ssqt","stqt","soqt","sofc","scfc","scqt","splr","spli","sprs","spre","smrs","smre","sors","sore","sack","sapl","sapa","snsp"]);var Ka=[ja("required",ua(ea,(()=>Yt(4,1,1,13,1)))),ja("typeof",ua(ca("string"),(()=>Yt(4,1,1,13,2)))),ja("eventEnum",ua(Wa,(()=>Yt(4,1,1,13,3))))];var ei=[ja("defaultValue",Va(!0,[1,1,14,1])),ja("typeOf",ua(ca("boolean"),(()=>Yt(4,1,1,14,2))))];var ti=[ja("required",ua(ea,(()=>Yt(4,1,1,24,1)))),ja("typeOf",ua(ca("string"),(()=>Yt(4,1,1,24,2))))];var ri=oa(["debug","hybrid"]);var ni=[ja("required",ua(ea,(()=>Yt(4,1,1,19,1)))),ja("typeof",ua(ca("string"),(()=>Yt(4,1,1,19,2)))),ja("enum",ua(ri,(()=>Yt(4,1,1,19,3))))];var ai=[ja("required",ua(ea,(()=>Yt(4,1,1,28,1)))),ja("typeof",ua(ca("string"),(()=>Yt(4,1,1,28,2))))];const ii=(e,t)=>!e||ea(t);var si=e=>(t,r)=>{if("function"!==zt(e))return ii(t,r);const n=e(t);return ii(n,r)};var oi=[ja("requiredIf",ua(si(),(()=>Yt(4,1,1,29,1)))),ja("typeOf",Ma(ca("string"),void 0,[1,1,29,2]))];var ci=[ja("requiredIf",ua(si(),(()=>Yt(4,1,1,30,1)))),ja("typeOf",Ma(ca("number"),0,[2,1,30,2]))];var ui=oa(["cp","sp","xp"]);var li=[ja("defaultValue",Va("cp",[1,1,20,1])),ja("typeOf",Ma(ca("string"),"cp",[1,1,20,2])),ja("enum",Ma(ui,"cp",[1,1,20,3]))];var di=[ja("required",ua(ea,(()=>Yt(4,1,1,26,1)))),ja("typeOf",ua(ca("string"),(()=>Yt(4,1,1,26,2)))),ja("siteIdentifier",ua(Pa,(()=>Yt(4,1,1,26,3)))),ja("min",ua(ia(3),(()=>Yt(4,1,1,26,4)))),ja("max",ua(aa(15),(()=>Yt(4,1,1,26,5))))];var hi=[ja("typeOf",ua(ca(sa),(()=>Yt(4,1,1,22,1)))),ja("between",ua(ra(1,4),(()=>Yt(4,1,1,22,1))))];var fi=oa(qa);var mi=[ja("required",ua(ea,(()=>Yt(4,1,1,23,1)))),ja("typeof",ua(ca("string"),(()=>Yt(4,1,1,23,2)))),ja("enum",ua(fi,(()=>Yt(4,1,1,23,3))))];var Ei=[ja("defaultValue",Va(1,[1,1,17,1])),ja("typeOf",Ma(ca("number"),1,[1,1,17,2])),ja("max",Ma(ra(1,7),1,[1,1,17,3]))];var pi=[ja("defaultValue",Va(1,[1,1,18,1])),ja("typeOf",Ma(ca("number"),1,[1,1,18,2])),ja("max",Ma(ra(1,5),1,[1,1,18,3]))];var vi={id:1,name:"configure",abbreviation:"cf",parameters:[[ha(Ua),Ea(za(!1)),pa(Ha),va(Qa),_a(Xa),ga(Za),ya(ei),ba(Ei),Ta(pi),Na(oi),Ra(ci),wa(di),Ca(hi)]],options:{allowJSON:!0}};var _i={id:3,name:"event",abbreviation:"ev",dependencies:[1,2],parameters:[Oa(Ka)],options:{allowJSON:!1}};var gi={id:4,name:"hybrid",abbreviation:"hy",parameters:[[pa(Ha),va(Qa),ga(Za),wa(di),Sa(ti)]],options:{allowJSON:!0}};var Oi=[vi,{id:2,name:"pageview",abbreviation:"pv",dependencies:[1],parameters:[[fa(ka),ma($a),Da(li),Ca(hi)]],options:{allowJSON:!0}},gi,_i,{id:5,name:"setMode",abbreviation:"sm",parameters:[Ia(ni)],options:{allowJSON:!1}},{id:6,name:"setMultiIdentifier",abbreviation:"smi",parameters:[Aa(ai)],options:{allowJSON:!1}},{id:e=>qa.indexOf(e.thirdPartyModule)+7,name:"thirdPartyModules",abbreviation:"3p",dependencies:[1,2],parameters:[La(mi)],options:{allowJSON:!1}}],yi="object"==typeof global&&global&&global.Object===Object&&global,Si="object"==typeof self&&self&&self.Object===Object&&self,bi=yi||Si||Function("return this")(),Ti=bi.Symbol,Ii=Object.prototype,Ai=Ii.hasOwnProperty,Ni=Ii.toString,Ri=Ti?Ti.toStringTag:void 0;var Di=Object.prototype.toString;var wi=Ti?Ti.toStringTag:void 0;function Ci(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":wi&&wi in Object(e)?function(e){var t=Ai.call(e,Ri),r=e[Ri];try{e[Ri]=void 0;var n=!0}catch(e){}var a=Ni.call(e);return n&&(t?e[Ri]=r:delete e[Ri]),a}(e):function(e){return Di.call(e)}(e)}function Li(e){return null!=e&&"object"==typeof e}function Mi(e){return"symbol"==typeof e||Li(e)&&"[object Symbol]"==Ci(e)}function ji(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}var Pi=Array.isArray,Ui=Ti?Ti.prototype:void 0,Vi=Ui?Ui.toString:void 0;function Fi(e){if("string"==typeof e)return e;if(Pi(e))return ji(e,Fi)+"";if(Mi(e))return Vi?Vi.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var Gi=/\s/;var xi=/^\s+/;function qi(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Gi.test(e.charAt(t)););return t}(e)+1).replace(xi,""):e}function ki(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var $i=/^[-+]0x[0-9a-f]+$/i,Bi=/^0b[01]+$/i,zi=/^0o[0-7]+$/i,Yi=parseInt;var Hi=1/0;function Qi(e){return e?(e=function(e){if("number"==typeof e)return e;if(Mi(e))return NaN;if(ki(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ki(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=qi(e);var r=Bi.test(e);return r||zi.test(e)?Yi(e.slice(2),r?2:8):$i.test(e)?NaN:+e}(e))===Hi||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function Ji(e){var t=Qi(e),r=t%1;return t==t?r?t-r:t:0}function Xi(e){return e}function Zi(e){if(!ki(e))return!1;var t=Ci(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Wi=bi["__core-js_shared__"],Ki=function(){var e=/[^.]+$/.exec(Wi&&Wi.keys&&Wi.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var es=Function.prototype.toString;var ts=/^\[object .+?Constructor\]$/,rs=Function.prototype,ns=Object.prototype,as=rs.toString,is=ns.hasOwnProperty,ss=RegExp("^"+as.call(is).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function os(e){return!(!ki(e)||(t=e,Ki&&Ki in t))&&(Zi(e)?ss:ts).test(function(e){if(null!=e){try{return es.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function cs(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return os(r)?r:void 0}var us=Date.now;var ls,ds,hs,fs=function(){try{var e=cs(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ms=fs,Es=ms?function(e,t){return ms(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Xi,ps=(ls=Es,ds=0,hs=0,function(){var e=us(),t=16-(e-hs);if(hs=e,t>0){if(++ds>=800)return arguments[0]}else ds=0;return ls.apply(void 0,arguments)}),vs=ps;function _s(e){return e!=e}function gs(e,t){return!!(null==e?0:e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):function(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}(e,_s,r)}(e,t,0)>-1}var Os=Math.max;function ys(e,t){return vs(function(e,t,r){return t=Os(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=Os(n.length-t,0),s=Array(i);++a<i;)s[a]=n[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=n[a];return o[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(e,t,Xi),e+"")}function Ss(e){return Li(e)&&"[object Arguments]"==Ci(e)}var bs=Object.prototype,Ts=bs.hasOwnProperty,Is=bs.propertyIsEnumerable,As=Ss(function(){return arguments}())?Ss:function(e){return Li(e)&&Ts.call(e,"callee")&&!Is.call(e,"callee")},Ns=As;function Rs(e){return function(t){return e(t)}}var Ds=cs(Object,"create");var ws=Object.prototype.hasOwnProperty;var Cs=Object.prototype.hasOwnProperty;function Ls(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Ms(e,t){for(var r,n,a=e.length;a--;)if((r=e[a][0])===(n=t)||r!=r&&n!=n)return a;return-1}Ls.prototype.clear=function(){this.__data__=Ds?Ds(null):{},this.size=0},Ls.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ls.prototype.get=function(e){var t=this.__data__;if(Ds){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ws.call(t,e)?t[e]:void 0},Ls.prototype.has=function(e){var t=this.__data__;return Ds?void 0!==t[e]:Cs.call(t,e)},Ls.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ds&&void 0===t?"__lodash_hash_undefined__":t,this};var js=Array.prototype.splice;function Ps(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ps.prototype.clear=function(){this.__data__=[],this.size=0},Ps.prototype.delete=function(e){var t=this.__data__,r=Ms(t,e);return!(r<0)&&(r==t.length-1?t.pop():js.call(t,r,1),--this.size,!0)},Ps.prototype.get=function(e){var t=this.__data__,r=Ms(t,e);return r<0?void 0:t[r][1]},Ps.prototype.has=function(e){return Ms(this.__data__,e)>-1},Ps.prototype.set=function(e,t){var r=this.__data__,n=Ms(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var Us=cs(bi,"Map");function Vs(e,t){var r=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map}function Fs(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gs(e){return null==e?"":Fi(e)}function xs(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}Fs.prototype.clear=function(){this.size=0,this.__data__={hash:new Ls,map:new(Us||Ps),string:new Ls}},Fs.prototype.delete=function(e){var t=Vs(this,e).delete(e);return this.size-=t?1:0,t},Fs.prototype.get=function(e){return Vs(this,e).get(e)},Fs.prototype.has=function(e){return Vs(this,e).has(e)},Fs.prototype.set=function(e,t){var r=Vs(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var qs=Ti?Ti.isConcatSpreadable:void 0;function ks(e){return Pi(e)||Ns(e)||!!(qs&&e&&e[qs])}function $s(e,t,r,n,a){var i=-1,s=e.length;for(r||(r=ks),a||(a=[]);++i<s;){var o=e[i];t>0&&r(o)?t>1?$s(o,t-1,r,n,a):xs(a,o):n||(a[a.length]=o)}return a}function Bs(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(a);++n<a;)i[n]=e[n+t];return i}(e,t,r)}var zs=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");function Ys(e){return zs.test(e)}var Hs="\\ud800-\\udfff",Qs="["+Hs+"]",Js="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Xs="\\ud83c[\\udffb-\\udfff]",Zs="[^"+Hs+"]",Ws="(?:\\ud83c[\\udde6-\\uddff]){2}",Ks="[\\ud800-\\udbff][\\udc00-\\udfff]",eo="(?:"+Js+"|"+Xs+")"+"?",to="[\\ufe0e\\ufe0f]?",ro=to+eo+("(?:\\u200d(?:"+[Zs,Ws,Ks].join("|")+")"+to+eo+")*"),no="(?:"+[Zs+Js+"?",Js,Ws,Ks,Qs].join("|")+")",ao=RegExp(Xs+"(?="+Xs+")|"+no+ro,"g");function io(e){return Ys(e)?function(e){return e.match(ao)||[]}(e):function(e){return e.split("")}(e)}var so=cs(bi,"Set");function oo(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Fs;++t<r;)this.add(e[t])}function co(e,t){return e.has(t)}function uo(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function lo(e){return Li(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Zi(e)}(e)}function ho(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}oo.prototype.add=oo.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oo.prototype.has=function(e){return this.__data__.has(e)};var fo=Math.min;function mo(e){return lo(e)?e:[]}var Eo=ys((function(e){var t=ji(e,mo);return t.length&&t[0]===e[0]?function(e,t,r){for(var n=r?ho:gs,a=e[0].length,i=e.length,s=i,o=Array(i),c=1/0,u=[];s--;){var l=e[s];s&&t&&(l=ji(l,Rs(t))),c=fo(l.length,c),o[s]=!r&&(t||a>=120&&l.length>=120)?new oo(s&&l):void 0}l=e[0];var d=-1,h=o[0];e:for(;++d<a&&u.length<c;){var f=l[d],m=t?t(f):f;if(f=r||0!==f?f:0,!(h?co(h,m):n(u,m,r))){for(s=i;--s;){var E=o[s];if(!(E?co(E,m):n(e[s],m,r)))continue e}h&&h.push(m),u.push(f)}}return u}(t):[]})),po=Eo,vo=Math.floor;function _o(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=vo(t/2))&&(e+=e)}while(t);return r}var go,Oo=(go="length",function(e){return null==e?void 0:e[go]}),yo="\\ud800-\\udfff",So="["+yo+"]",bo="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",To="\\ud83c[\\udffb-\\udfff]",Io="[^"+yo+"]",Ao="(?:\\ud83c[\\udde6-\\uddff]){2}",No="[\\ud800-\\udbff][\\udc00-\\udfff]",Ro="(?:"+bo+"|"+To+")"+"?",Do="[\\ufe0e\\ufe0f]?",wo=Do+Ro+("(?:\\u200d(?:"+[Io,Ao,No].join("|")+")"+Do+Ro+")*"),Co="(?:"+[Io+bo+"?",bo,Ao,No,So].join("|")+")",Lo=RegExp(To+"(?="+To+")|"+Co+wo,"g");function Mo(e){return Ys(e)?function(e){for(var t=Lo.lastIndex=0;Lo.test(e);)++t;return t}(e):Oo(e)}var jo=Math.ceil;function Po(e,t){var r=(t=void 0===t?" ":Fi(t)).length;if(r<2)return r?_o(t,e):t;var n=_o(t,jo(e/Mo(t)));return Ys(t)?Bs(io(n),0,e).join(""):n.slice(0,e)}function Uo(e,t,r){e=Gs(e);var n=(t=Ji(t))?Mo(e):0;return t&&n<t?Po(t-n,r)+e:e}var Vo=so&&1/uo(new so([,-0]))[1]==1/0?function(e){return new so(e)}:function(){},Fo=Vo;var Go=ys((function(e){return function(e,t,r){var n=-1,a=gs,i=e.length,s=!0,o=[],c=o;if(r)s=!1,a=ho;else if(i>=200){var u=t?null:Fo(e);if(u)return uo(u);s=!1,a=co,c=new oo}else c=t?[]:o;e:for(;++n<i;){var l=e[n],d=t?t(l):l;if(l=r||0!==l?l:0,s&&d==d){for(var h=c.length;h--;)if(c[h]===d)continue e;t&&c.push(d),o.push(l)}else a(c,d,r)||(c!==o&&c.push(d),o.push(l))}return o}($s(e,1,lo,!0))})),xo=Go;const qo=e=>e.core?xo(Object.keys(e.core.purpose.consents).filter((t=>!0===e.core.purpose.consents[t])).map((e=>+e)),Object.keys(e.core.purpose.legitimateInterests).filter((t=>!0===e.core.purpose.legitimateInterests[t])).map((e=>+e))).concat(Object.keys(e.core.specialFeatureOptins).filter((t=>!0===e.core.specialFeatureOptins[t])).map((e=>+e+10))):xo(Object.keys(e.purpose.consents).filter((t=>!0===e.purpose.consents[t])).map((e=>+e)),Object.keys(e.purpose.legitimateInterests).filter((t=>!0===e.purpose.legitimateInterests[t])).map((e=>+e))).concat(Object.keys(e.specialFeatureOptins).filter((t=>!0===e.specialFeatureOptins[t])).map((e=>+e+10)));var ko=(e,t)=>{const r=((e,t)=>e.core?po(xo(Object.keys(e.core.vendorConsents).filter((t=>!0===e.core.vendorConsents[t])).map((e=>+e)),Object.keys(e.core.vendorLegitimateInterests).filter((t=>!0===e.core.vendorLegitimateInterests[t])).map((e=>+e))),t):po(xo(Object.keys(e.vendor.consents).filter((t=>!0===e.vendor.consents[t])).map((e=>+e)),Object.keys(e.vendor.legitimateInterests).filter((t=>!0===e.vendor.legitimateInterests[t])).map((e=>+e))),t))(e,t),n=[];for(let a=0,i=t.length;a<i;a+=1){let i=[];const s=t[a];r.includes(s)&&(i=qo(e)),n.push(i)}return n};const $o=e=>e.map((e=>2**(e-1))).reduce(((e,t)=>e+t),0);class Bo{constructor(e,t,r){Object.defineProperties(this,{type:{value:e,writable:!1,enumerable:!0,configurable:!1},value:{value:t,writeable:!1,enumerable:!0,configurable:!1},vendors:{value:r,writeable:!1,enumerable:!0,configurable:!1}})}check(e,t){const r=this.vendors.indexOf(e),n=Array.isArray(t)?t:[t];if(r>-1){let e=$o(n);if(r<this.vendors.length-1){let t=e.toString(16);t=function(e,t,r){e=Gs(e);var n=(t=Ji(t))?Mo(e):0;return t&&n<t?e+Po(t-n,r):e}(t,4*(this.vendors.length-r)-(4-t.length),"0"),e=parseInt(t,16)}return(this.value&e)===e}return!1}toString(e=16){return 2===e?`${Uo(this.type.toString(2),8,"0")}${Uo(this.value.toString(2),16*this.vendors.length,"0")}`:`${Uo(this.type.toString(e),2,"0")}${Uo(this.value.toString(e),4*this.vendors.length,"0")}`}static create(e,t,r=Bo.TYPES.TCF2X){let n="";for(let r=0,a=e.length;r<a;r+=1){n+=Uo($o(t[r]).toString(16),4,"0")}return n=parseInt(n,16),new Bo(r,n,e)}}Bo.TYPES=Object.defineProperties({},{NONE:{value:0,writeable:!1,enumerable:!0,configurable:!1},TCF2X:{value:1,writeable:!1,enumerable:!0,configurable:!1},CUSTOM:{value:255,writeable:!1,enumerable:!0,configurable:!1}});var zo=Bo;class Yo extends ${constructor(e){super(),this.vendors=e,this.ioConsentString=void 0}convert(e){try{if(e){const t=ko(e,this.vendors);return this.ioConsentString=zo.create(this.vendors,t),this.emit(Yo.EVENTS.TCF_CONVERT_SUCCESS,{ioConsentString:this.ioConsentString}),this.ioConsentString}throw new xt(xt.TYPES.ERROR,3,3,2,1)}catch(e){const t=new xt(xt.TYPES.ERROR,3,3,2,2,e instanceof xt?e:e.message);return void this.emit(Yo.EVENTS.TCF_CONVERT_FAILED,t)}}}var Ho=Yo;Yo.EVENTS={TCF_CONVERT_SUCCESS:"TCF_CONVERT_SUCCESS",TCF_CONVERT_FAILED:"TCF_CONVERT_FAILED"};const Qo=e=>{const{category:t,validated:r}=e;if(!r){if(!t||!Object.values(Jo.CATEGORIES).includes(t))throw new xt(4,1,3,1,1);e.validated=!0}};class Jo extends ${constructor(){super(),this.moduleId=3,this.data=void 0}setItem(e,t,r){try{Qo(r);const{category:n}=r;void 0===this.data&&(this.data={global:{},measurement:{},sensor:{},feature:{},plugins:{},thirdPartyPlugins:{},tcf:{},bundleLoaded:{},version:{}}),this.data[n][e]=t,this.emit(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.SET,n,e),{key:e,value:t,category:n})}catch(e){throw new xt(4,1,this.moduleId,2,1,e instanceof xt?e:e.message)}}setItems(e,t,r){Qo(r);for(let n=0,a=e.length;n<a;n+=1)this.setItem(e[n],t[n],r)}deleteItem(e,t){try{if(Qo(t),this.data){const{category:r}=t;delete this.data[r][e],this.emit(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.DELETE,r,e),{key:e,category:r})}}catch(e){throw new xt(4,1,this.moduleId,4,1,e.message)}}deleteItems(e,t){Qo(t);for(let r=0,n=e.length;r<n;r+=1)this.deleteItem(e[r],t)}getItem(e,t){try{Qo(t);const{category:r}=t,n={key:e,category:r,value:void 0};return this.data&&this.data[r]&&void 0!==this.data[r][e]&&(n.value=this.data[r][e]),n}catch(e){throw new xt(4,1,this.moduleId,6,1,e.message)}}getItems(e,t){Qo(t);const r=[];for(let n=0,a=e.length;n<a;n+=1)r.push(this.getItem(e[n],t));return r}static generateDataMutationEventName(e,t,r){return`data.mutation.${`${e}.${t}.${r}`.toLowerCase()}`}}Jo.CATEGORIES={GLOBAL:"global",MEASUREMENT:"measurement",SENSOR:"sensor",FEATURE:"feature",PLUGINS:"plugins",THIRD_PARTY_PLUGINS:"thirdPartyPlugins",TCF:"tcf",BUNDLE_LOADED:"bundleLoaded",VERSION:"version"},Jo.MUTATION_EVENTS={SET:"SET",DELETE:"DELETE"};const Xo=(e,t)=>{if(t.tcf){const{value:r}=e.manager.dataLayer.getItem("consentString",{category:"tcf"});r instanceof zo&&t.queue.queue.items.forEach(((e,n)=>{"configure"===e[0]&&(e[1].consentString=r.toString(16),t.queue.queue.items[n]=e)}))}},Zo=(e,t,r)=>{if(t.tcf){const{value:t}=e.manager.dataLayer.getItem("consentString",{category:"tcf"});t instanceof zo&&(r.consentString=t.toString(16))}return r},Wo=(e,r,n)=>"object"===t(r)?Object.keys(r).reduce(((t,a)=>(n.parameterBlacklist&&n.parameterBlacklist[e]&&n.parameterBlacklist[e].includes(a)||(t[a]=r[a]),t)),{}):r;class Ko extends ${constructor(e,t){super(),this.moduleId=2,this.manager=e,this.defaultModules=t.map((e=>e.name)),this.modules=new Map(t.map((e=>[e.name,{...e,queue:new $t(void 0,{mode:$t.MODE.MANUAL}),active:!1,tcf:!!e.tcf}]))),this.manager.dataLayer.on(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.SET,Jo.CATEGORIES.TCF,"consentString"),(()=>{this.handleConsentChanged()}))}addModule(e,t){if(this.modules.has(e)){const e=new xt(3,1,this.moduleId,3,1);this.emit(Ko.EVENTS.ADD_MODULE,e)}else this.modules.set(e,{...t,queue:new $t(void 0,{mode:$t.MODE.MANUAL}),active:!1})}addFacade(e,t){const r=this.modules.get(e);r.queue.addFacadeFactory(t),this.modules.set(e,r)}removeFacade(e){const t=this.modules.get(e);t.queue.removeFacadeFactory(),this.modules.set(e,t)}activate(e){const t=this.modules.get(e);Xo(this,t),t.active=!0,t.queue.options.mode=$t.MODE.AUTO,t.queue.dequeue(),this.modules.set(e,t)}deactivate(e){const t=this.modules.get(e);t.active=!1,t.queue.options.mode=$t.MODE.MANUAL,t.queue.flush(),this.modules.set(e,t)}enqueue(e,t={}){try{this.modules.forEach(((r,n)=>{if(-1===this.defaultModules.indexOf(n))return;let i=a(t);i=Wo(e,t,r),"configure"===e&&(i=Zo(this,r,i)),r.queue.enqueue(e,i)}))}catch(e){const t=new xt(3,1,this.moduleId,1,1,e);throw this.emit(Ko.EVENTS.ENQUEUE_ERROR,t),t}}enqueueToSingleModule(e,t,r={}){try{const n=this.modules.get(e);if(n){let e=a(r);e=Wo(t,r,n),"configure"===t&&(e=Zo(this,n,e)),n.queue.enqueue(t,e)}}catch(e){const t=new xt(3,1,this.moduleId,4,1,e);throw this.emit(Ko.EVENTS.ENQUEUE_ERROR,t),t}}dequeue(){try{this.modules.forEach(((e,t)=>{-1!==this.defaultModules.indexOf(t)&&e.queue.dequeue()}))}catch(e){const t=new xt(3,1,this.moduleId,2,1,e);throw this.emit(Ko.EVENTS.ENQUEUE_ERROR,t),t}}handleConsentChanged(){try{this.modules.forEach((e=>{Xo(this,e)}))}catch(e){const t=new xt(xt.TYPES.ERROR,3,this.moduleId,5,2,e.message);this.emit(Ko.EVENTS.EXECUTION_ERROR,t)}}}Ko.EVENTS={MODULE_NOT_LOADED:"MODULE_NOT_LOADED",QUEUE_CREATION_ERROR:"QUEUE_CREATION_ERROR",QUEUE_DOES_NOT_EXIST:"QUEUE_DOES_NOT_EXIST",ENQUEUE_ERROR:"ENQUEUE_ERROR",DEQUEUE_ERROR:"DEQUEUE_ERROR",ADD_MODULE:"ADD_MODULE",EXECUTION_ERROR:"EXECUTION_ERROR"};const ec=1,tc=2,rc=3;var nc={sensors:{iomb:{bit:1,cdn:{host:()=>"dsn",path:({ecmaVersion:e,variant:t,version:r})=>`/iomb/${r}/sensor/manager/${t}/${e}/bundle.js`},parameterBlacklist:{configure:["panelIdentifier","panelVendorId"]}},iomp:{bit:4,tcf:{consent:[1,8],vendor:730},cdn:{host:({country:e})=>"at"===e?"script-at.iocnt.net":"script.ioam.de",path:({ecmaVersion:e,variant:t,version:r})=>`/sensor/${r}/manager/${t}/${e}/bundle.js`},parameterBlacklist:{configure:[]}}},modules:{},tcf:{vendors:[730,785],frequency:100,max:10,wait:5e3,events:["tcloaded","useractioncomplete"]},cdn:["dsn","script.ioam.de"],hybrid:{performSiteCheck:!1,apiKeys:e=>"at"===e?{ios:"IOMbOEWAHybridMessageHandler",android:"IOMbOEWAHybridBridge"}:{ios:"IOMbHybridMessageHandler",android:"IOMbHybridBridge"}},metaTags:{loading:"iomm_config_loading",scriptBlockProtection:"iomm_script_block_protection"}};const ac=1,ic=2,sc=3,oc=e=>nc.sensors[e]?{name:e,...nc.sensors[e]}:nc.modules[e]?{name:e,...nc.modules[e]}:null;var cc=(e=ac)=>{const t=[];return e!==ac&&e!==ic||Object.keys(nc.sensors).forEach((e=>{t.push({name:e,...nc.sensors[e]})})),e!==ac&&e!==sc||Object.keys(nc.modules).forEach((e=>{t.push({name:e,...nc.modules[e]})})),t};const uc={iomb:"IOMb",iomp:"IOMp"};class lc extends ${constructor(e,t,r=nc){if(super(),this.moduleId=4,void 0===e)throw new xt(4,1,this.moduleId,1,1);this.dataLayer=e,this.manager=t,this.settings=r}load(t,r,n=!1){return new Promise(((a,i)=>{try{const s={category:Jo.CATEGORIES.SENSOR},o=this.dataLayer.getItem(r,s);if(o&&void 0===o.value){const o={url:t},{value:c="async"}=this.dataLayer.getItem("loading",{category:Jo.CATEGORIES.GLOBAL});o[c]=c,r!==lc.BUNDLE_VARIANTS.IOMP&&r!==lc.BUNDLE_VARIANTS.QDS&&(o.crossOrigin="anonymous"),e(o).then((()=>{const e=uc[r],t=window[e];t?(n||delete window[e],this.dataLayer.setItem(r,"function"==typeof t?t:()=>t,s),a()):i(new xt(3,1,this.moduleId,2,2))})).catch((e=>{i(new xt(3,1,this.moduleId,2,1,e.message))}))}else a()}catch(e){i(new xt(3,1,this.moduleId,2,3,e.message))}}))}generateSensorUrl(e){const t=oc(e.sensorVariant);if(void 0===e.sensorVariant||void 0===t)throw new xt(3,1,this.moduleId,3,1);const r=this.dataLayer.getItem("country",{category:Jo.CATEGORIES.GLOBAL}).value;let a="base";const i=this.settings.hybrid.apiKeys;e.sensorVariant!==lc.BUNDLE_VARIANTS.IOMB&&e.sensorVariant!==lc.BUNDLE_VARIANTS.IOMP||!function(e,t,r=ec){const{value:a}=e.dataLayer.getItem("hybrid",{category:"global"}),i=n(t),s=Object.keys(t),o=e.commandProcessor.history.has(6)||e.commandProcessor.commandQueue.queue.items.findIndex((([e])=>"smi"===e||"setMultiIdentifier"===e))>-1;return r===tc?!0===a&&s.includes(i):r===rc?!0===a&&o:!0===a&&(s.includes(i)||o)}(this.manager,i(r),tc)||(a="hybrid");const{value:s}=this.dataLayer.getItem(t.name,{category:Jo.CATEGORIES.VERSION});let o=(0,t.cdn.host)({country:r});"dsn"===o&&(o=this.dataLayer.getItem("domainServiceName",{category:Jo.CATEGORIES.GLOBAL}).value);const c={ecmaVersion:window[window.IOMmGlobalObject].esm?"es6":"es5",variant:a,version:s||"latest"};return`//${o}${(0,t.cdn.path)(c)}`}generateModuleUrl(e){const t=oc(e.moduleVariant);if(void 0===e.moduleVariant||void 0===t)throw new xt(3,1,this.moduleId,4,1);const{value:r}=this.dataLayer.getItem(t.name,{category:Jo.CATEGORIES.VERSION});let n=(0,t.cdn.host)({country:this.dataLayer.getItem("country",{category:Jo.CATEGORIES.GLOBAL}).value});"dsn"===n&&(n=this.dataLayer.getItem("domainServiceName",{category:Jo.CATEGORIES.GLOBAL}).value);const a={ecmaVersion:window[window.IOMmGlobalObject].esm?"es6":"es5",version:r||"latest"};return`//${n}${(0,t.cdn.path)(a)}`}}lc.BUNDLE_VARIANTS={IOMB:"iomb",IOMP:"iomp"},lc.LOADING_METHODS={ASYNC:"async",DEFER:"defer"},lc.LOADING_STATUS={LOADING:1,LOADED:2,LOADING_FAILED:3};const dc=e=>{window.__tcfapi("removeEventListener",2,(()=>{}),e)},hc=(e,t)=>{e&&e.listenerId>=0&&(t.stopPolling?dc(e.listenerId):t.tcfApiListenerIds.push(e.listenerId))},fc=e=>(t,r)=>{try{if(hc(t,e),e.stopPolling)return;let n;r&&e.settings.tcf.events.includes(t.eventStatus)&&!0===t.gdprApplies?(n=e.convert(t),e.emit(Ec.EVENTS.TCF_DATA_PROCESSED),window.__tcfapi("removeEventListener",2,(()=>{}),t.listenerId)):(n=zo.create(e.vendors,[[0],[0]],zo.TYPES.TCF2X),e.emit(Ec.EVENTS.TCF_DATA_CANNOT_BE_PROCESSED)),e.dataLayer.setItem("consentString",n,{category:Jo.CATEGORIES.TCF})}catch(t){const r=new xt(xt.TYPES.ERROR,3,6,1,1,t.message);e.emit(Ec.EVENTS.TCF_DATA_PROCESSING_ERROR,r)}},mc=e=>{e.stopPolling||(window.__tcfapi&&"function"==typeof window.__tcfapi?(window.__tcfapi("addEventListener",2,fc(e)),window.__tcfapi("addEventListener",2,(e=>(t,r)=>{hc(t,e),e.stopPolling||r&&"cmpuishown"===t.eventStatus&&window.__tcfapi("addEventListener",2,fc(e))})(e))):(e.numberOfTries<e.settings.tcf.max+1?setTimeout((()=>{mc(e)}),e.numberOfTries<e.settings.tcf.max?e.settings.tcf.frequency:e.settings.tcf.wait):e.emit(Ec.EVENTS.TCF_API_NOT_ACCESSIBLE),e.numberOfTries+=1))};class Ec extends Ho{constructor(e,t,r=nc){super(e),this.moduleId=6,this.vendors=e,this.dataLayer=t,this.numberOfTries=0,this.stopPolling=!1,this.tcfApiListenerIds=[],this.settings=r}process(){try{mc(this)}catch(e){const t=new xt(xt.TYPES.ERROR,3,this.moduleId,5,1,e.message);throw this.emit(Ec.EVENTS.TCF_DATA_PROCESSING_ERROR,t),t}}stop(){try{this.tcfApiListenerIds.forEach((e=>{dc(e)})),this.stopPolling=!0}catch(e){const t=new xt(xt.TYPES.ERROR,3,this.moduleId,6,1,e.message);throw this.emit(Ec.EVENTS.TCF_API_CANNOT_STOP,t),t}}}Ec.EVENTS={TCF_DATA_PROCESSED:"TCF_DATA_PROCESSED",TCF_DATA_CANNOT_BE_PROCESSED:"TCF_DATA_CANNOT_BE_PROCESSED",TCF_API_NOT_ACCESSIBLE:"TCF_API_NOT_ACCESSIBLE",TCF_DATA_PROCESSING_ERROR:"TC_DATA_PROCESSING_ERROR",TCF_API_CANNOT_STOP:"TCF_API_CANNOT_STOP"};var pc=e=>{try{e.handledBfCache||(window.addEventListener("pageshow",(t=>{if(!0===t.persisted){const t=e.dataLayer.getItems(["code","comment","pixelType"],{category:"measurement"}).reduce(((e,{key:t,value:r})=>(e[t]=r,e)),{});setTimeout((()=>{e.command("pageview",t)}),0)}})),e.handledBfCache=!0)}catch(t){e.emit("EXECUTION_ERROR",t)}};var vc=(e,t)=>{try{const r=new zo(zo.TYPES.NONE,parseInt(e.substring(2),16),t.settings.tcf.vendors);if(r.toString(16)!==`00${e.substring(2)}`){throw new xt(xt.TYPES.ERROR,3,1,3,1)}return t.tcfProcessor.stop(),r}catch(e){return t.emit("MANUAL_CONSENT_ERROR",e),null}};var _c=(e,t)=>{e!==lc.LOADING_METHODS.ASYNC&&e!==lc.LOADING_METHODS.DEFER||t.dataLayer.setItem("loading",e,{category:Jo.CATEGORIES.GLOBAL})};var gc=(e,t,r)=>{const n=t.toLowerCase().replace("v.","").replace("v","");if(n.match(/^(0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/)){if(e.includes("iomm_config_version_sensor")){cc(ic).forEach((t=>{e.toLowerCase()===`iomm_config_version_sensor_${t.name}`&&r.dataLayer.setItem(t.name,n,{category:Jo.CATEGORIES.VERSION})}))}if(e.includes("iomm_config_version_3p")||e.includes("iomm_config_version_ext")){cc(sc).forEach((n=>{e.toLowerCase()!==`iomm_config_version_3p_${n.name}`&&e.toLowerCase()!==`iomm_config_version_ext_${n.name}`||r.dataLayer.setItem(n.name,t,{category:Jo.CATEGORIES.VERSION})}))}}};var Oc=e=>{try{document.querySelectorAll("meta").forEach((t=>{const r=t.getAttribute("name"),n=t.getAttribute("content");r&&n&&(r===e.settings.metaTags.loading&&_c(n,e),r.includes("iomm_config_version")&&gc(r,n,e))}))}catch(t){const r=new xt(xt.TYPES.ERROR,3,1,4,1,t.message);e.emit("EXECUTION_ERROR",r)}};const yc=(e,t)=>{try{const{value:r}=t.dataLayer.getItem("methods",{category:Jo.CATEGORIES.GLOBAL});e.filter((e=>void 0===e.bit||(r&e.bit)===e.bit)).forEach((e=>{let r=!e.tcf;const n=t.dataLayer.getItem(e.name,{category:Jo.CATEGORIES.SENSOR});if(e.tcf){const{value:a}=t.dataLayer.getItem("consentString",{category:Jo.CATEGORIES.TCF});a&&a instanceof zo?(r=a.check(e.tcf.vendor,e.tcf.consent),r?(n.value||t.commandDispatcher.activate(e.name),t.dataLayer.on(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.SET,Jo.CATEGORIES.TCF,"consentString"),(()=>{Sc([e],t)}))):t.dataLayer.once(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.SET,Jo.CATEGORIES.TCF,"consentString"),(()=>{yc([e],t)}))):t.dataLayer.once(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.SET,Jo.CATEGORIES.TCF,"consentString"),(()=>{yc([e],t)}),e.name)}else t.commandDispatcher.activate(e.name);if(n.value)t.commandDispatcher.addFacade(e.name,n.value);else if(r){let r;t.dataLayer.once(Jo.generateDataMutationEventName(Jo.MUTATION_EVENTS.SET,Jo.CATEGORIES.SENSOR,e.name),(()=>{yc([e],t)})),r=Object.keys(t.settings.sensors).includes(e.name)?t.bundleLoader.generateSensorUrl({sensorVariant:e.name}):t.bundleLoader.generateModuleUrl({moduleVariant:e.name});const{value:n}=t.dataLayer.getItem(e.name,{category:Jo.CATEGORIES.BUNDLE_LOADED});n||(t.dataLayer.setItem(e.name,lc.LOADING_STATUS.LOADING,{category:Jo.CATEGORIES.BUNDLE_LOADED}),t.bundleLoader.load(r,e.name,e.cdn.static).then((()=>{t.dataLayer.setItem(e.name,lc.LOADING_STATUS.LOADED,{category:Jo.CATEGORIES.BUNDLE_LOADED})})).catch((r=>{t.emit("EXECUTION_ERROR",r),t.dataLayer.setItem(e.name,lc.LOADING_STATUS.LOADING_FAILED,{category:Jo.CATEGORIES.BUNDLE_LOADED})})))}}))}catch(e){t.emit("EXECUTION_ERROR",e)}},Sc=(e,t)=>{try{e.filter((e=>{const{value:r}=t.dataLayer.getItem("methods",{category:Jo.CATEGORIES.GLOBAL});return void 0===e.bit||(r&e.bit)===e.bit})).forEach((e=>{const{value:r}=t.dataLayer.getItem("consentString",{category:Jo.CATEGORIES.TCF});if(r&&r instanceof zo){if(!1===r.check(e.tcf.vendor,e.tcf.consent))t.commandDispatcher.removeFacade(e.name),t.commandDispatcher.deactivate(e.name);else{const r=t.dataLayer.getItem(e.name,{category:Jo.CATEGORIES.SENSOR});r&&r.value?(t.commandDispatcher.addFacade(e.name,r.value),t.commandDispatcher.activate(e.name)):yc([e],t)}}}))}catch(e){t.emit("EXECUTION_ERROR",e)}};class bc extends ${constructor(e,t=nc){super(),this.moduleId=1,this.commandQueue=e,this.commandProcessor=new da(e,Oi,{fillParameters:!0,maxExecutionBeforeStop:3}),this.dataLayer=new Jo,this.commandDispatcher=new Ko(this,cc(ic)),this.settings=t,this.bundleLoader=new lc(this.dataLayer,this,this.settings),this.tcfProcessor=new Ec(this.settings.tcf.vendors,this.dataLayer,this.settings),this.skipExecution=!1,this.handledBfCache=!1,this.tcfProcessor.process(),Oc(this)}command(e,...t){try{this.commandProcessor.commandSerializer.reset();const r=this.commandProcessor.process(e,...t);if(r&&r.parameters){switch(e){case bc.COMMANDS.CONFIGURE:if(r.parameters.consentString){const e=vc(r.parameters.consentString,this);e&&e instanceof zo&&(r.parameters.consentString=e.toString(16),this.dataLayer.setItem("consentString",e,{category:Jo.CATEGORIES.TCF})),null===e&&delete r.parameters.consentString}this.dataLayer.setItems(Object.keys(r.parameters),Object.values(r.parameters),{category:Jo.CATEGORIES.GLOBAL}),yc(cc(ic),this);break;case bc.COMMANDS.PAGEVIEW:this.dataLayer.deleteItem("event",{category:Jo.CATEGORIES.MEASUREMENT}),this.dataLayer.setItems(Object.keys(r.parameters),Object.values(r.parameters),{category:Jo.CATEGORIES.MEASUREMENT}),pc(this);break;case bc.COMMANDS.THIRD_PARTY_MODULES:oc(r.parameters.thirdPartyModule)&&((e,t)=>{try{const r=oc(e.thirdPartyModule);t.commandDispatcher.addModule(r.name,r),t.commandDispatcher.enqueueToSingleModule(r.name,"configure",e),yc([r],t)}catch(e){t.emit(bc.EVENTS.EXECUTION_ERROR,e)}})(r.parameters,this),this.skipExecution=!0;break;case bc.COMMANDS.EVENT:this.dataLayer.setItem("event",r.parameters.event,{category:Jo.CATEGORIES.MEASUREMENT});break;case bc.COMMANDS.SET_MULTI_IDENTIFIER:this.dataLayer.setItem("multiIdentifier",r.parameters.multiIdentifier,{category:Jo.CATEGORIES.GLOBAL}),this.commandDispatcher.enqueueToSingleModule(lc.BUNDLE_VARIANTS.IOMP,bc.COMMANDS.SET_MULTI_IDENTIFIER,r.parameters.multiIdentifier),this.skipExecution=!0}return!1===this.skipExecution&&this.commandDispatcher.enqueue(e,r.parameters),void(this.skipExecution=!1)}throw new xt(xt.TYPES.FATAL,3,1,1,1,this.commandProcessor.commandSerializer.lastAssertion)}catch(e){throw e instanceof xt?e:new xt(xt.TYPES.FATAL,3,1,1,2,e.message)}}}function Tc(e){const t=new bc(e);return{cf(...e){t.command(bc.COMMANDS.CONFIGURE,...e)},configure(...e){t.command(bc.COMMANDS.CONFIGURE,...e)},pv(...e){t.command(bc.COMMANDS.PAGEVIEW,...e)},pageview(...e){t.command(bc.COMMANDS.PAGEVIEW,...e)},sm(...e){t.command(bc.COMMANDS.SET_MODE,...e)},setMode(...e){t.command(bc.COMMANDS.SET_MODE,...e)},"3p"(...e){t.command(bc.COMMANDS.THIRD_PARTY_MODULES,...e)},thirdPartyModules(...e){t.command(bc.COMMANDS.THIRD_PARTY_MODULES,...e)},event(...e){t.command(bc.COMMANDS.EVENT,...e)},ev(...e){t.command(bc.COMMANDS.EVENT,...e)},hybrid(...e){t.command(bc.COMMANDS.HYBRID,...e)},hy(...e){t.command(bc.COMMANDS.HYBRID,...e)},smi(...e){t.command(bc.COMMANDS.SET_MULTI_IDENTIFIER,...e)},setMultiIdentifier(...e){t.command(bc.COMMANDS.SET_MULTI_IDENTIFIER,...e)}}}bc.COMMANDS={CONFIGURE:"configure",PAGEVIEW:"pageview",HYBRID:"hybrid",EVENT:"event",SET_MODE:"setMode",THIRD_PARTY_MODULES:"thirdPartyModules",SET_MULTI_IDENTIFIER:"setMultiIdentifier"},bc.EVENTS={COMMAND_DOES_NOT_EXIST:"COMMAND_DOES_NOT_EXIST",EXECUTION_ERROR:"EXECUTION_ERROR",MANUAL_CONSENT_ERROR:"MANUAL_CONSENT_ERROR"};const Ic="IOMmGlobalObject"in window?window.IOMmGlobalObject:window.IOMmGlobalObject="IOMm",Ac=window[Ic]||(window[Ic]=(...e)=>{(window[Ic].q=window[Ic].q||[]).push(...e)});Ac.version="1.11.0",window.iom||(window.iom={},window.iom.smi=window.iom.setMultiIdentifier=e=>Ac("setMultiIdentifier",e)),Ac.q=new $t(Tc,{multiTenancy:!0},Ac.q),Ac.create=Tc}();
